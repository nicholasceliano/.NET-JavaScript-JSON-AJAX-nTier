!function (e) { function t(e, t) { return "function" == typeof e ? e.call(t) : e } function i(e) { for (; e = e.parentNode;) if (e == document) return !0; return !1 } function n(t, i) { this.$element = e(t), this.options = i, this.enabled = !0, this.fixTitle() } n.prototype = { show: function () { var i = this.getTitle(); if (i && this.enabled) { var n = this.tip(); n.find(".tipsy-inner")[this.options.html ? "html" : "text"](i), n[0].className = "tipsy", n.remove().css({ top: 0, left: 0, visibility: "hidden", display: "block" }).prependTo(document.body); var a, o = e.extend({}, this.$element.offset(), { width: this.$element[0].offsetWidth, height: this.$element[0].offsetHeight }), s = n[0].offsetWidth, r = n[0].offsetHeight, l = t(this.options.gravity, this.$element[0]); switch (l.charAt(0)) { case "n": a = { top: o.top + o.height + this.options.offset, left: o.left + o.width / 2 - s / 2 }; break; case "s": a = { top: o.top - r - this.options.offset, left: o.left + o.width / 2 - s / 2 }; break; case "e": a = { top: o.top + o.height / 2 - r / 2, left: o.left - s - this.options.offset }; break; case "w": a = { top: o.top + o.height / 2 - r / 2, left: o.left + o.width + this.options.offset } } 2 == l.length && (a.left = "w" == l.charAt(1) ? o.left + o.width / 2 - 15 : o.left + o.width / 2 - s + 15), n.css(a).addClass("tipsy-" + l), n.find(".tipsy-arrow")[0].className = "tipsy-arrow tipsy-arrow-" + l.charAt(0), this.options.className && n.addClass(t(this.options.className, this.$element[0])), this.options.fade ? n.stop().css({ opacity: 0, display: "block", visibility: "visible" }).animate({ opacity: this.options.opacity }) : n.css({ visibility: "visible", opacity: this.options.opacity }) } }, hide: function () { this.options.fade ? this.tip().stop().fadeOut(function () { e(this).remove() }) : this.tip().remove() }, fixTitle: function () { var e = this.$element; (e.attr("title") || "string" != typeof e.attr("original-title")) && e.attr("original-title", e.attr("title") || "").removeAttr("title") }, getTitle: function () { var e, t = this.$element, i = this.options; this.fixTitle(); var e, i = this.options; return "string" == typeof i.title ? e = t.attr("title" == i.title ? "original-title" : i.title) : "function" == typeof i.title && (e = i.title.call(t[0])), e = ("" + e).replace(/(^\s*|\s*$)/, ""), e || i.fallback }, tip: function () { return this.$tip || (this.$tip = e('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>'), this.$tip.data("tipsy-pointee", this.$element[0])), this.$tip }, validate: function () { this.$element[0].parentNode || (this.hide(), this.$element = null, this.options = null) }, enable: function () { this.enabled = !0 }, disable: function () { this.enabled = !1 }, toggleEnabled: function () { this.enabled = !this.enabled } }, e.fn.tipsy = function (t) { function i(i) { var a = e.data(i, "tipsy"); return a || (a = new n(i, e.fn.tipsy.elementOptions(i, t)), e.data(i, "tipsy", a)), a } function a() { var e = i(this); e.hoverState = "in", 0 == t.delayIn ? e.show() : (e.fixTitle(), setTimeout(function () { "in" == e.hoverState && e.show() }, t.delayIn)) } function o() { var e = i(this); e.hoverState = "out", 0 == t.delayOut ? e.hide() : setTimeout(function () { "out" == e.hoverState && e.hide() }, t.delayOut) } if (t === !0) return this.data("tipsy"); if ("string" == typeof t) { var s = this.data("tipsy"); return s && s[t](), this } if (t = e.extend({}, e.fn.tipsy.defaults, t), t.live || this.each(function () { i(this) }), "manual" != t.trigger) { var r = t.live ? "live" : "bind", l = "hover" == t.trigger ? "mouseenter" : "focus", d = "hover" == t.trigger ? "mouseleave" : "blur"; this[r](l, a)[r](d, o) } return this }, e.fn.tipsy.defaults = { className: null, delayIn: 0, delayOut: 0, fade: !1, fallback: "", gravity: "n", html: !0, live: !1, offset: 0, opacity: .8, title: "tipsy", trigger: "hover" }, e.fn.tipsy.revalidate = function () { e(".tipsy").each(function () { var t = e.data(this, "tipsy-pointee"); t && i(t) || e(this).remove() }) }, e.fn.tipsy.elementOptions = function (t, i) { return e.metadata ? e.extend({}, i, e(t).metadata()) : i }, e.fn.tipsy.autoNS = function () { return e(this).offset().top > e(document).scrollTop() + e(window).height() / 2 ? "s" : "n" }, e.fn.tipsy.autoWE = function () { return e(this).offset().left > e(document).scrollLeft() + e(window).width() / 2 ? "e" : "w" }, e.fn.tipsy.autoBounds = function (t, i) { return function () { var n = { ns: i[0], ew: i.length > 1 ? i[1] : !1 }, a = e(document).scrollTop() + t, o = e(document).scrollLeft() + t, s = e(this); return s.offset().top < a && (n.ns = "n"), s.offset().left < o && (n.ew = "w"), e(window).width() + e(document).scrollLeft() - s.offset().left < t && (n.ew = "e"), e(window).height() + e(document).scrollTop() - s.offset().top < t && (n.ns = "s"), n.ns + (n.ew ? n.ew : "") } } }(jQuery);